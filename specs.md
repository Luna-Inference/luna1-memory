AI Memory Layer API Specification
1. Overview
This document defines the API for an AI Memory Layer. This service provides a way for an AI system to store, retrieve, and manage pieces of information, referred to as "memories." The core functionality is powered by a vector database (like ChromaDB) to enable efficient, contextually relevant memory retrieval.

2. Authentication (Future Implementation)
Note: Currently, authentication is not enforced, and all API calls will be accepted without an API key. The following section serves as a placeholder for future implementation.

All API requests will eventually require authentication. Authentication will be handled via an API key passed in the request header.

Header: Authorization

Value: Bearer YOUR_API_KEY

3. Data Models
3.1. Memory Object
The fundamental data structure in the system.

Field

Type

Description

Required

id

string

A unique identifier for the memory (e.g., UUID). Generated by the server upon creation.

(On GET)

content

string

The text-based content of the memory itself.

Yes

metadata

object

A key-value store for arbitrary data, useful for filtering. Can contain tags, sources, timestamps, etc.

No

createdAt

string

An ISO 8601 timestamp indicating when the memory was created. Generated by the server.

(On GET)

relevance

float

(Only in retrieval responses) A score from 0.0 to 1.0 indicating how relevant the memory is to the query.

No

Example Memory Object:

{
  "id": "f47ac10b-58cc-4372-a567-0e02b2c3d479",
  "content": "The user's favorite color is blue.",
  "metadata": {
    "source": "conversation-log-123",
    "userId": "user-abc-789",
    "type": "user_preference"
  },
  "createdAt": "2025-06-30T13:45:00Z"
}

4. Endpoints
4.1. Add Memory
Adds a new memory to the system. The service will generate an embedding for the content and store it.

Method: POST

Endpoint: /memory

Request Body:

{
  "content": "string",
  "metadata": {
    "key": "value"
  }
}

Success Response (201 Created):

Returns the newly created memory object, including the server-generated id and createdAt timestamp.

{
  "id": "f47ac10b-58cc-4372-a567-0e02b2c3d479",
  "content": "The user's favorite color is blue.",
  "metadata": {
    "source": "conversation-log-123",
    "userId": "user-abc-789",
    "type": "user_preference"
  },
  "createdAt": "2025-06-30T13:45:00Z"
}

Error Responses:

400 Bad Request: If content is missing or invalid.

4.2. Remove Memory
Permanently deletes a memory from the system using its unique ID.

Method: DELETE

Endpoint: /memory/{id}

URL Parameters:

id (string, required): The unique identifier of the memory to delete.

Success Response (204 No Content):

An empty response body indicating successful deletion.

Error Responses:

404 Not Found: If no memory with the specified id exists.

4.3. Retrieve Relevant Memories
Searches for and retrieves memories that are most relevant to a given query text.

Method: POST

Endpoint: /memory/retrieve

Request Body:

Field

Type

Description

Required

query

string

The text to search for relevant memories.

Yes

top_k

integer

The maximum number of relevant memories to return. Defaults to 5.

No

filter

object

A metadata filter to apply before the search (e.g., to scope by userId). See ChromaDB docs.

No

Example Request Body:

{
  "query": "What do I know about the user's preferences?",
  "top_k": 3,
  "filter": {
    "userId": "user-abc-789"
  }
}

Success Response (200 OK):

Returns an array of memory objects, sorted by relevance score in descending order.

[
  {
    "id": "f47ac10b-58cc-4372-a567-0e02b2c3d479",
    "content": "The user's favorite color is blue.",
    "metadata": {
      "source": "conversation-log-123",
      "userId": "user-abc-789",
      "type": "user_preference"
    },
    "createdAt": "2025-06-30T13:45:00Z",
    "relevance": 0.92
  },
  {
    "id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
    "content": "The user enjoys classical music, especially Mozart.",
    "metadata": {
      "source": "conversation-log-124",
      "userId": "user-abc-789",
      "type": "user_interest"
    },
    "createdAt": "2025-06-28T10:15:00Z",
    "relevance": 0.85
  }
]

Error Responses:

400 Bad Request: If query is missing.